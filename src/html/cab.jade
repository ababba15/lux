extends ../layouts/main-page.jade

block title
  title Electrolux - Кабинет

block content
  div(data-spy="affix" id="dot-nav")
    ul
      li(class="awesome-tooltip active" title="Главная")
        a(href="#home")
      li(class="awesome-tooltip" title="Выбери свой комплект")
        a(href="#calc")
      li(class="awesome-tooltip" title="Рассчитай свою выгоду")
        a(href="#own-calc")
      li(class="awesome-tooltip" title="Популярные продукты")
        a(href="#prod")
      li(class="awesome-tooltip" title="Наши партнеры")
        a(href="#partners")
  include ../layouts/header-two.jade
  #home.section-nav
    section.section-main.bg-cover(style="background-image: url(images/image.jpg);")
      .container-fixed
        p.section-main__date(data-animation="slideInLeft") С 1 декабря по 31 января 2017
        h1(data-animation="slideInLeft") Electrolux возвращает<br />деньги за покупки
    section.section-map
      .container-fixed
        a.section-map__item(href="#buy" data-animation="slideInLeft")
          .section-map__icon
            i.icon-cart
          h3 Приобрети технику<br /><b>Electrolux</b>
        a.section-map__item(href="#" data-toggle="modal" data-target="#regModal" data-animation="zoomIn")
          .section-map__icon
            i.icon-pencil
          h3 Зарегистрируйся в<br />акции
        a.section-map__item(href="#" data-toggle="modal" data-target="#howItWork" data-animation="slideInRight")
          .section-map__icon
            i.icon-question
          h3 Как это работает
  section#calc.section-nav.section-calculate
    .container-fixed
      h2.title(style="margin-bottom: 0;") Выбери свой комплект
      p.text-center.pink Выберите товары, чтобы узнать свою выгоду
      .row
        .section-calculate__item.col-md-4
          .section-calculate__products.products
            .products__item(data-productID="1" data-name="Духовка" data-price="0" data-type="1")
              img(src="images/pic1.png", alt="")
            i.icon-plus
            .products__item(data-productID="7" data-name="Варочная панель" data-price="0" data-type="2")
              img(src="images/pic2.png", alt="")
            i.icon-plus
            .products__item(data-productID="9" data-name="Посудомоечная машина" data-price="0" data-type="3")
              img(src="images/pic3.png", alt="" )
          .section-calculate__text
            p При покупке комплекта духовки,<br />варочной панели и посудомоечной<br />машины <b>Electrolux</b>
          button.button Рассчитать выгоду
        .section-calculate__item.col-md-4
         .section-calculate__products.products
            .products__item(data-productID="1" data-name="Духовка" data-price="0" data-type="1")
              img(src="images/pic1.png", alt="")
            i.icon-plus
            .products__item(data-productID="7" data-name="Варочная панель" data-price="0" data-type="2")
              img(src="images/pic2.png", alt="")
          .section-calculate__text
            p При покупке комплекта духовки и<br />варочной панели <b>Electrolux</b>
          button.button Рассчитать выгоду
        .section-calculate__item.col-md-4
         .section-calculate__products.products
            .products__item(data-productID="9"  data-name="Посудомоечная машина" data-price="0" data-type="3")
              img(src="images/pic3.png", alt="")
          .section-calculate__text
            p При покупке посудомоечной<br />машины <b>Electrolux</b>
          button.button Рассчитать выгоду
  section#own-calc.section-nav.section-calculator
    .container-fixed
      h2.title(style="margin-bottom: 0;") Рассчитай свою выгоду
      p.text-center.pink Выберите товары, чтобы узнать свою выгоду
      .section-calculator__calculator.row
        .col-md-8
          .section-calculator__item(data-type="1" data-name="Духовка")
            .section-calculator__prod
            .section-calculator__button
              button.button.addPosition Добавить<br />духовку
          .section-calculator__item(data-type="2" data-name="Варочная<br />панель")
            .section-calculator__prod
            .section-calculator__button
              button.button.addPosition Добавить варочную панель
          .section-calculator__item(data-type="3" data-name="Посудомоечная<br />машина")
            .section-calculator__prod
            .section-calculator__button
              button.button.addPosition Добавить посудомоечную машину
        .col-md-4
          .section-calculator__amount
            .section-calculator__amount-number 0
            .section-calculator__amount-text Ваша выгода
  .section-nav#prod
    section#buy.section-slider
      .container-fixed
        h2.title(style="margin-bottom: 0;") Популярные продукты
        p(style="margin-bottom: 40px;").text-center.pink Выбери подходящий тебе продукт, добавь в калькулятор, узнай свою выгоду.
        h2.title Духовые шкафы
        #slider-1.owl-carousel.slider
          .slider__item(data-productID="1" data-type="1")
            .slider__image(style="background-image: url(images/pic4.png);")
            h5.slider__title Electrolux OPEA 4300 X
            .slider__desc При покупке комплекта духовки,<br />варочной панели и посудомоечной<br />машины <b>Electrolux</b>
            .slider__price(data-price="13200") 13 200 руб.
            .slider__seller UnixMart.ru
          .slider__item(data-productID="2" data-type="1")
            .slider__image(style="background-image: url(images/pic4.png);")
            h5.slider__title Electrolux OPEA 4300 X
            .slider__desc При покупке комплекта духовки,<br />варочной панели и посудомоечной<br />машины <b>Electrolux</b>
            .slider__price(data-price="13200") 13 200 руб.
            .slider__seller UnixMart.ru
          .slider__item(data-productID="3" data-type="1")
            .slider__image(style="background-image: url(images/pic4.png);")
            h5.slider__title Electrolux OPEA 4300 X
            .slider__desc При покупке комплекта духовки,<br />варочной панели и посудомоечной<br />машины <b>Electrolux</b>
            .slider__price(data-price="13200") 23 200 руб.
            .slider__seller UnixMart.ru
          .slider__item(data-productID="4" data-type="1")
            .slider__image(style="background-image: url(images/pic4.png);")
            h5.slider__title Electrolux OPEA 4300 X
            .slider__desc При покупке комплекта духовки,<br />варочной панели и посудомоечной<br />машины <b>Electrolux</b>
            .slider__price(data-price="13200") 13 200 руб.
            .slider__seller UnixMart.ru
        .text-center
          button(data-button="1").addToCalc.button.button-icon--star Добавить в калькулятор
    section.section-slider
      .container-fixed
        h2.title Варочные поверхности
        #slider-2.owl-carousel.slider
          .slider__item(data-productID="5" data-type="2")
            .slider__image(style="background-image: url(images/pic6.png);")
            h5.slider__title Electrolux OPEA 4300 X
            .slider__desc При покупке комплекта духовки,<br />варочной панели и посудомоечной<br />машины <b>Electrolux</b>
            .slider__price(data-price="13200") 13 200 руб.
            .slider__seller UnixMart.ru
          .slider__item(data-productID="6" data-type="2")
            .slider__image(style="background-image: url(images/pic6.png);")
            h5.slider__title Electrolux OPEA 4300 X
            .slider__desc При покупке комплекта духовки,<br />варочной панели и посудомоечной<br />машины <b>Electrolux</b>
            .slider__price(data-price="13200") 13 200 руб.
            .slider__seller UnixMart.ru
          .slider__item(data-productID="7" data-type="2")
            .slider__image(style="background-image: url(images/pic6.png);")
            h5.slider__title Electrolux OPEA 4300 X
            .slider__desc При покупке комплекта духовки,<br />варочной панели и посудомоечной<br />машины <b>Electrolux</b>
            .slider__price(data-price="13") 13 руб.
            .slider__seller UnixMart.ru
          .slider__item(data-productID="8" data-type="2")
            .slider__image(style="background-image: url(images/pic6.png);")
            h5.slider__title Electrolux OPEA 4300 X
            .slider__desc При покупке комплекта духовки,<br />варочной панели и посудомоечной<br />машины <b>Electrolux</b>
            .slider__price(data-price="13200") 13 200 руб.
            .slider__seller UnixMart.ru
        .text-center
          button(data-button="2").addToCalc.button.button-icon--star Добавить в калькулятор
    section.section-slider
      .container-fixed
        h2.title Посудомоечные машины
        #slider-3.owl-carousel.slider
          .slider__item(data-productID="9" data-type="3")
            .slider__image(style="background-image: url(images/pic5.png);")
            h5.slider__title Electrolux OPEA 4300 X
            .slider__desc При покупке комплекта духовки,<br />варочной панели и посудомоечной<br />машины <b>Electrolux</b>
            .slider__price(data-price="13200") 13 200 руб.
            .slider__seller UnixMart.ru
          .slider__item(data-productID="10" data-type="3")
            .slider__image(style="background-image: url(images/pic5.png);")
            h5.slider__title Electrolux OPEA 4300 X
            .slider__desc При покупке комплекта духовки,<br />варочной панели и посудомоечной<br />машины <b>Electrolux</b>
            .slider__price(data-price="13200") 13 200 руб.
            .slider__seller UnixMart.ru
          .slider__item(data-productID="11" data-type="3")
            .slider__image(style="background-image: url(images/pic5.png);")
            h5.slider__title Electrolux OPEA 4300 X
            .slider__desc При покупке комплекта духовки,<br />варочной панели и посудомоечной<br />машины <b>Electrolux</b>
            .slider__price(data-price="13200") 13 200 руб.
            .slider__seller UnixMart.ru
          .slider__item(data-productID="12" data-type="3")
            .slider__image(style="background-image: url(images/pic5.png);")
            h5.slider__title Electrolux OPEA 4300 X
            .slider__desc При покупке комплекта духовки,<br />варочной панели и посудомоечной<br />машины <b>Electrolux</b>
            .slider__price(data-price="13200") 13 200 руб.
            .slider__seller UnixMart.ru
        .text-center
          button(data-button="3").addToCalc.button.button-icon--star Добавить в калькулятор
  include ../includes/partners.jade
  .modal.how-it-work.fade#howItWork(tabindex="-1" role="dialog" aria-labelledby="regProducts")
    .modal-dialog(role="document")
      .modal-content
        .modal-header
          button.close(type="button" data-dismiss="modal" aria-label="Close")
            span(aria-hidden="true") Назад
          .modal-logo
          h3.modal-title.text-center Как это работает?
        .modal-body
          .how-it-work__item
            .row
              .col-xs-12
                .section-calculate__item
                  .section-calculate__products.products
                    .products__item
                      img(src="images/pic1.png", alt="")
                    i.icon-plus
                    .products__item
                      img(src="images/pic2.png", alt="")
                    i.icon-plus
                    .products__item
                      img(src="images/pic3.png", alt="" )
                  .section-calculate__text
                    p При покупке комплекта духовки,<br />варочной панели и посудомоечной<br />машины <b>Electrolux</b>
            .row
              .col-md-4
                h5.how-it-work__title До 40 000 руб. включительно
                .how-it-work__text Приз = 30% от стоимости<br />посудомоечной машины (по чеку)
              .col-md-4
                h5.how-it-work__title от 40 001 до 80 000 руб.
                .how-it-work__text Приз = 40% от стоимости<br />посудомоечной машины (по чеку)
              .col-md-4
                h5.how-it-work__title более либо равно 80 001 руб.
                .how-it-work__text Приз = 50% от стоимости<br />посудомоечной машины (по чеку)
          .how-it-work__item
            .row
              .col-xs-12
                .section-calculate__item
                  .section-calculate__products.products
                    .products__item
                      img(src="images/pic1.png", alt="")
                    i.icon-plus
                    .products__item
                      img(src="images/pic2.png", alt="")
                  .section-calculate__text
                    p При покупке комплекта духовки и<br />варочной панели <b>Electrolux</b>
            .row
              .col-md-4
                h5.how-it-work__title До 40 000 руб. включительно
                .how-it-work__text  Приз = 5 000 руб.
              .col-md-4
                h5.how-it-work__title от 40 001 до 80 000 руб.
                .how-it-work__text Приз = 8 000 руб.
              .col-md-4
                h5.how-it-work__title более либо равно 80 001 руб.
                .how-it-work__text Приз = 10 000 руб.
          .how-it-work__item
            .row
              .col-xs-12
                .section-calculate__item
                  .section-calculate__products.products
                    .products__item
                      img(src="images/pic3.png", alt="" )
                  .section-calculate__text
                    p При покупке посудомоечной<br />машины <b>Electrolux</b>
            .row
              .col-md-4
                h5.how-it-work__title До 40 000 руб. включительно
                .how-it-work__text  Приз = 3 000 руб.
              .col-md-4
                h5.how-it-work__title от 40 001 до 80 000 руб.
                .how-it-work__text Приз = 6 000 руб.
              .col-md-4
                h5.how-it-work__title более либо равно 80 001 руб.
                .how-it-work__text Приз = 9 000 руб.
  .modal.popup.fade(data-backdrop="false" id="regModalInfo" tabindex="-1" role="dialog")
    .modal-dialog(role="document")
      .modal-content.text-center
        .modal-body
          h3(style="margin: 20px 0; font-weight: 600;")
  .modal.fade#regModal
    .modal-dialog(role="document")
      .modal-content
        .modal-header
          button.close(type="button" data-dismiss="modal" aria-label="Close")
            span(aria-hidden="true") Назад
          .modal-logo
            img(src="images/logo.svg", alt="")
          h3.modal-title.text-center Изменение данных
        .modal-body
          form#regForm
            .input-set
              input(type="text" name="name" placeholder="Фамилия" required)
            .input-set
              input(type="text" name="surname" placeholder="Имя" required)
            .input-set
              input(type="text" name="patronymic" placeholder="Отчество" required)
            .input-set.input-date
                input#date.input(type="text" name="birthday" placeholder="Дата дня рождения" required)
            .input-set
              select.chosen-select#where(name="where" data-placeholder="Откуда Вы узнали об акции?" required)
                  option
                  option(value="1") Друзья
                  option(value="2") Реклама в интернете
                  option(value="3") Реклама в магазине
            .input-set
              input#email(type="text" name="email" placeholder="E-mail" required)
            .input-set
              input(type="text" name="ident" placeholder="ИИН" required)
            .input-set
              input#passNum(type="text" name="passNum" minlength="10" maxlength="10" placeholder="Серия номер паспорта" required)
            .input-set
              input#divCode(type="text" name="divCode" placeholder="Код подразделения" required)
            .input-set
              input(type="text" name="passOne" placeholder="Кем выдан" required)
            .input-set.input-date
              input#passTwo(type="text" name="passTwo" placeholder="Когда выдан" required)
            .input-set
              textarea(name="", cols="30", rows="2" placeholder="Адрес по прописке")
            .input-set
              input#zipCode(type="text" name="zipCode" minlength="6" maxlength="6" placeholder="Почтовый индекс" required)
            .input-set
              input(type="text" name="city" placeholder="Населенный пункт" required)
            .input-set
              input(type="text" name="street" placeholder="Улица" required)
            .input-set
              input(type="text" name="building" placeholder="Дом" required)
            .input-set
              input(type="text" placeholder="Корпус")
            .input-set
              input(type="text" name="flat" placeholder="Квартира" required)
            .input-set
              input#phone(type="text" name="phone" placeholder="+7 (000) 000-00-00" required)
            .input-set
              select.chosen-select(name="store" data-placeholder="Название магазина" required)
                  option
                  option(val="1") М.Видео 
                  option(val="2") Эльдорадо 
                  option(val="3") ММС 
                  option(val="4") Техносила 
                  option(val="5") Стильные кухни 
                  option(val="6") Салон Техноторг 
                  option(val="7") Мороз и кофе 
                  option(val="8") Амадеус 
                  option(val="9") Памира 
                  option(val="10") electrolux-rus/кухнисити 
                  option(val="11") Хофф 
                  option(val="12") Кухнисити 
                  option(val="13") Архиформ 
                  option(val="14") Холодильник 
                  option(val="15") Electrolux-shop.ru 
                  option(val="16") 003.RU 
                  option(val="17") Реванш 
                  option(val="18") Домотехника 
                  option(val="19") ТК "Дружба" 
                  option(val="20") Поиск 
                  option(val="21") Центр 
                  option(val="22") RBT.RU 
                  option(val="23") 5 Элемент 
                  option(val="24") Норд 
                  option(val="25") Домо 
                  option(val="26") ТЕХНО 
                  option(val="27") Юлмарт 
                  option(val="28") Baltmaximus 
                  option(val="29") Технопарк 
                  option(val="30") Техпорт 
                  option(val="31") Citilink.ru 
                  option(val="32") Astrade 
                  option(val="33") RayBT.ru 
                  option(val="34") Hedway 
                  option(val="35") ДНС 
                  option(val="36") ДНС 
                  option(val="37") ДНС 
                  option(val="38") Мебельная Фабрика Мария 
                  option(val="39") Кухонный Двор
                  option(value="0") Другое
            .input-set
              input(type="text" name="cityTwo" placeholder="Город покупки" required)
            .input-set
              input(type="text" name="storeAddress" placeholder="Адрес магазина" required)
            .input-set
              select.chosen-select#modelOne.model(name="modelOne" data-placeholder="Модель варочной поверхности")
                  option
                  option(value="1") Параметр 1
                  option(value="2") Параметр 2
                  option(value="3") Параметр 3
                  option(value="4") Параметр 4
                  option(value="5") Параметр 5
                  option(value="0") Другое
              input.model-input.modelOne(type="text" placeholder="Название модели" style="display: none;" data-init="false")
            .input-set
              input(type="text" name="priceOne" placeholder="Цена варочной поверхности")
              .helper (Стоимость со скидкой)
            .input-set
              select.chosen-select#modelTwo.model(name="modelTwo" data-placeholder="Модель духового шкафа")
                  option
                  option(value="1") Параметр 1
                  option(value="2") Параметр 2
                  option(value="3") Параметр 3
                  option(value="4") Параметр 4
                  option(value="5") Параметр 5
                  option(value="0") Другое
              input.model-input.modelTwo(type="text" placeholder="Название модели" style="display: none;" data-init="false")
            .input-set
              input(type="text" name="priceTwo" placeholder="Цена духового шкафа")
              .helper (Стоимость со скидкой)
            .input-set
              select.chosen-select#modelThree.model(name="modelThree" data-placeholder="Модель посудомоечной машины")
                  option
                  option(value="1") Параметр 1
                  option(value="2") Параметр 2
                  option(value="3") Параметр 3
                  option(value="4") Параметр 4
                  option(value="5") Параметр 5
                  option(value="0") Другое
              input.model-input.modelThree(type="text" placeholder="Название модели" style="display: none;" data-init="false")
            .input-set
              input(type="text" name="priceThree" placeholder="Цена посудомоечной машины")
              .helper (Стоимость со скидкой)
            .input-set
              select#credit.chosen-select(name="credit" data-placeholder="Товар куплен в кредит?*" required)
                  option
                  option(value="1") Да
                  option(value="0") Нет
            .input-set
              .file
                input#check(name="check" type="file" accept="image/jpeg,image/png" required)
                label(for="check") Скан-копия чека
              .helper.file-name
            .input-set
              .file
                input#photo1(name="photo1" type="file" accept="image/jpeg,image/png" multiple required)
                label(for="photo1") Фото товара без упаковки в домашней обстановке
              .helper.file-name
              .helper Допустимые форматы для загрузки: *.jpg, *.png
            .input-set
              input#serialNumOne.serialNumber(type="text" name="serialNumOne" placeholder="Серийный номер варочной поверхности")
            .input-set
              input#serialNumTwo.serialNumber(type="text" name="serialNumTwo" placeholder="Серийный номер духового шкафа")
            .input-set
              input#serialNumThree.serialNumber(type="text" name="serialNumThree" placeholder="Серийный номер посудомоечной машины")
            .input-set
              .file
                input#photo2(name="photo2" type="file" accept="image/jpeg,image/png" data-depend="serialNumOne")
                label(for="photo2") Фото серийного номера варочной поверхности
              .helper.file-name
              .helper (обозначается на корпусе техники)
              .helper Допустимые форматы для загрузки: *.jpg, *.png
            .input-set
              .file
                input#photo3(name="photo3" type="file" accept="image/jpeg,image/png" data-depend="serialNumTwo")
                label(for="photo3") Фото серийного номера духового шкафа 
              .helper.file-name
              .helper (обозначается на корпусе техники)
              .helper Допустимые форматы для загрузки: *.jpg, *.png
            .input-set
              .file
                input#photo4(name="photo4" type="file" accept="image/jpeg,image/png" data-depend="serialNumThree")
                label(for="photo4") Фото серийного номера посудомоечной машины
              .helper.file-name
              .helper (обозначается на корпусе техники)
              .helper Допустимые форматы для загрузки: *.jpg, *.png
            .input-set#photo6-input(style="display: none;")
              .file
                input#photo6(name="photo6" type="file" accept="image/jpeg,image/png")
                label(for="photo6") Скан кредитного договора
              .helper.file-name
              .helper (Заполняется при условии покупки в кредит)
              .helper Допустимые форматы для загрузки: *.jpg, *.png
            .input-set
              select.chosen-select#method(name="method" data-placeholder="Способ получения приза" required)
                  option
                  option(value="1") Банковская карта
                  option(value="2") Кошелек Яндекс.деньги
                  option(value="3") Мобильный телефон
            .input-set.method(style="display: none;")
              input(type="text" name="cardNum" minlength="16" maxlength="18" placeholder="Номер карты банка")
            .input-set
              input.button(type="submit" value="Сохранить")
              #error.text-center
        .modal-footer

block scripts
  script.
  
    //- $('#date').datetimepicker({
    //-   format: 'DD.MM.YYYY',
    //-   locale: "ru"
    //- });

    //- $('#passTwo').datetimepicker({
    //-   format: 'DD.MM.YYYY',
    //-   locale: "ru"
    //- });

    $("#slider-1").owlCarousel({
      mouseDrag: false,
      center: true,
      items:1,
      nav:true,
      margin:10,
      navText: ['', ''],
      startPosition: 1,
      responsive:{
          586:{
              items: 3
          }
      }
    });

    $("#slider-2").owlCarousel({
      mouseDrag: false,
      center: true,
      items:1,
      nav:true,
      margin:10,
      navText: ['', ''],
      startPosition: 1,
      responsive:{
          586:{
              items: 3
          }
      }
    });

    $("#slider-3").owlCarousel({
      mouseDrag: false,
      center: true,
      items:1,
      nav:true,
      margin:10,
      navText: ['', ''],
      startPosition: 1,
      responsive:{
          586:{
              items: 3
          }
      }
    });

    $("#slider-4").owlCarousel({
        mouseDrag: false,
        items: 3,
        nav: true,
        margin: 10,
        navText: ['', ''],
        responsive: {
            1000:{
                items: 5
            }
        }
    });

    //- $( '#partnersList' ).chosen( {disable_search_threshold: 50} ).change( function(e) { 
    //-   var openLink = window.open($(this).val(), '_blank');
    //-   openLink.focus();
    //- } );

    $.validator.addMethod( "require_from_group_with_depend", function( value, element, options ) {
      var $fields = $( options[ 1 ], element.form ),
        $fieldsFirst = $fields.eq( 0 ),
        elem = false,
        validator = $fieldsFirst.data( "valid_req_grp" ) ? $fieldsFirst.data( "valid_req_grp" ) : $.extend( {}, this ),
        isValid = $fields.filter( function() {
          $('input[data-depend="' + $(this).attr('name') +'"]').removeAttr( 'required' );

          if ( $(this).val().length >= options[ 0 ] && !elem) {
            elem = this;
          }
          return validator.elementValue( this );
        } ).length >= options[ 0 ];

      // Store the cloned validator for future validation
      $fieldsFirst.data( "valid_req_grp", validator );

      // If element isn't being validated, run each require_from_group field's validation rules
      if ( !$( element ).data( "being_validated" ) ) {
        $fields.data( "being_validated", true );
        $fields.each( function() {
          validator.element( this );
        } );
        $fields.data( "being_validated", false );
      }

      if ( isValid ) {
        var validEl = $('input[data-depend="' + $(elem).attr('name') +'"]');
        validEl.rules( "add", {
          required: true,
        } );
        validEl.valid();
      }
      return isValid;
    }, $.validator.format( "Please fill at least {0} of these fields." ) );

    $('#regForm').validate({
        onkeyup: true,
        rules: {
          serialNumOne: {
            require_from_group_with_depend: [1, ".serialNumber"]
          },
          serialNumTwo: {
            require_from_group_with_depend: [1, ".serialNumber"]
          },
          serialNumThree: {
            require_from_group_with_depend: [1, ".serialNumber"]
          },
          modelOne: {
            require_from_group: [1, ".model"]
          },
          modelTwo: {
            require_from_group: [1, ".model"]
          },
          modelThree: {
            require_from_group: [1, ".model"]
          }
        },

        submitHandler: function(form){

          $( '#regModalInfo .modal-body h3' ).html( 'Спасибо! Ваша заявка принята.' );
          $( '#regModalInfo' ).modal( 'show' );

          setTimeout( function() {
            $( '#regModalInfo' ).modal( 'hide' );
            $( '#regModal' ).modal( 'hide' );
            form.submit();
          }, 2000 );
          
        },
        invalidHandler: function(){
            $( '#regModalInfo .modal-body h3' ).html( 'Заполните пожалуйста выделенные поля' );
            $( '#regModalInfo' ).modal( 'show' );

            setTimeout( function() {
              $( '#regModalInfo' ).modal( 'hide' );
            }, 2000 );

            $('#error').html('Пожалуйста, заполните все поля');
        }
    });

    $( '.file input' ).on( 'change', function() {
      var files = $(this)[0].files,
          filesName = '';

      for ( var i = 0; i < files.length; i++ ) {
        filesName += i == files.length - 1 ? files[i].name : files[i].name + ', ';
      }
      $(this).parents('.input-set').find('.file-name').html( filesName );
    } )

    $( '#passNum' ).mask( '0000000000') ;
    $( '#zipCode' ).mask( '000000' );
    $( '#divCode' ).mask( '000000' );
    $( '#date' ).mask( '00.00.0000', { placeholder: 'ДД.ММ.ГГГГ' } );
    $( '#passTwo' ).mask( '00.00.0000', { placeholder: 'ДД.ММ.ГГГГ' } );
    $( '#phone' ).mask( '+7 (000) 00-00-00' );
    $( '#sum' ).mask( '000.000.000.000.000,00 руб.', { reverse: true });
    $( '#serialNumOne' ).mask( '0#' );
    $( '#serialNumTwo' ).mask( '0#' );
    $( '#serialNumThree' ).mask( '0#' );
    $( '#email' ).mask( 'Z', {translation:  {'Z': {pattern: /[\w@\-.+]/, recursive: true}}} );

    $( '#credit' ).change( function( event ) {
      if ( $( event.target ).val() == 1 ) {
        $( '#photo6-input' ).css( { display: 'block' } );
      } else {
        $( '#photo6-input' ).css( { display: 'none' } );
      }
    });

    $( '#method' ).change( function( event ) {
      if ( $( event.target ).val() == 1 || $( event.target ).val() == 2 ) {
        $( '.method' ).css( { display: 'block' } );
      } else {
        $( '.method' ).css( { display: 'none' } );
      }
    });

    $( '.model' ).chosen().change( function( event ) {
      var input = $( this ).parents( '.input-set' ).find( '.model-input' ),
          item = $( event.target ),
          _this = this;

      if ( $( event.target ).val() == 0 ) {
        input.css( { display: 'block' });

        if ( input.data( 'init' ) === false ) {

          function onKeyUp() {
            $( _this ).find( 'option:last-child' ).remove()
            $( _this ).append( '<option value="' + $( this ).val() + '">Другое</option>' );
            var options = $( _this ).find( 'option' );
            $( _this ).find( 'option' ).eq( $( _this ).find( 'option' ).length - 1 ).attr( 'selected', 'selected' );
            $( _this ).trigger("chosen:updated");
            
            console.log( $( _this ).val() );
          }

          input.data( 'init', 'true' )
          input.on( 'keyup', onKeyUp);

        }
      } else {
        $( this ).parents( '.input-set' ).find( '.model-input' ).css( { display: 'none' });
      }
    });

    $('.modal').on('shown.bs.modal', function (e) {
        
        if ( $( this ).hasClass('nout') ) {
          $('body').removeClass('modal-open');
        }

    });

    $('.modal').on('hidden.bs.modal', function (e) {
        
        if ( $( this ).hasClass('popup') ) {
            $('body').addClass('modal-open');
        } else {
          $('body').removeClass('modal-open');
        }

    });
    
    $('#auth-form').validate({
        onkeyup:true,
        rules: {
          email: {
            email: true
          }
        },
        submitHandler: function(form){
          form.submit();
        },
        invalidHandler: function(){
            $('#error').html('Пожалуйста, заполните все поля');
        }
    });

    $('#restore').validate({
        onkeyup:true,
        rules: {
          email: {
            email: true
          }
        },
        submitHandler: function(form){
          var response = true;

          $('#error').html('');

          if ( response ) {
            $( form ).parents( '.modal' ).find( '.modal-body' ).html( '<h2 class="text-center" style="margin-bottom: 50px;">Готово! Мы отправили новый пароль<br />на вашу почту.</h2>' );

            setTimeout( function() {
                $( form ).parents( '.modal' ).modal( 'hide' );
            }, 2000);
            
            return;
          } 

          $('#error').html('Мы не нашли вашу почту,</br>попробуйте еще раз');
        },
        invalidHandler: function(){
            $('#error').html('Пожалуйста, заполните все поля');
        }
    });